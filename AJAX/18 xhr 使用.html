<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XMLHttpRequest_基础使用</title>
</head>

<body>
  <p class="text">

  </p>
  <script>
    /**
     * 目标：使用XMLHttpRequest对象与服务器通信
     *  1. 创建 XMLHttpRequest 对象
     *  2. 配置请求方法和请求 url 地址
     *  3. 监听 loadend 事件，接收响应结果
     *  4. 发起请求
    */

    /* 
    1. AJAX 是浏览器与服务器通信的技术，采用 XMLHttpRequest 对象相关代码
2. axios 是对 XHR 相关代码进行了封装，让我们只关心传递的接口参数
3. 学习 XHR 也是了解 axios 内部与服务器交互过程的真正原理
    */

    const xhr = new XMLHttpRequest()
    xhr.open('GET', 'http://hmajax.itheima.net/api/province')
    xhr.addEventListener('loadend', () => {
      console.log(xhr.response)  //{"message":"获取省份成功","list":["北京","天津","河北省","山西省","内蒙古自治区","辽宁省","吉林省","黑龙江省","上海","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","广西壮族自治区","海南省","重庆","四川省","贵州省","云南省","西藏自治区","陕西省","甘肃省","青海省","宁夏回族自治区","新疆维吾尔自治区","台湾","香港特别行政区","澳门特别行政区"]}
      //字符串转为json
      const data = JSON.parse(xhr.response)
      document.querySelector('p').innerHTML = data.list.map((item) => item).join('<br>')
    })
    xhr.send()

  </script>
</body>

</html>